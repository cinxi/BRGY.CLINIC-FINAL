<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Profile</title>
    <!-- Linking Google Font Link For Icons --> 
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="/css/patient/profile.css"> <!-- Link to your logs.css -->
</head>
<body>
  

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <img src="/image/brgy-logo.png" alt="logo">
            <h3>Brgy. Clinic Appointment</h3>
        </div>
        <ul class="sidebar-links">
            <div class="menu-separator"></div>

            <li><a href="profile"><span class="material-symbols-outlined"> manage_accounts </span>Profile</a></li>
            <li><a href="appointment"><span class="material-symbols-outlined"> edit_calendar </span>Appointment</a></li>

            <li><a href="history"><span class="material-symbols-outlined">  save_clock    </span>History</a></li>
            <li><a href="login"><span class="material-symbols-outlined">logout</span>Logout</a></li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="sticky-header">
            <!-- <h2>Logs</h2> -->
        </div>

        <div class="view-profile-card">
            <div class="top-profile">
                <div class="profile-image">
                    <img src="/image/profile-img.png" alt="">
                </div>
                <div>
                    <h4><strong><%= firstName %> <%= lastName %></strong> </h4>
                    <p>Patient</p>
                </div>
                <div>
                    <button id="editButton" class="btn btn-edit" >
                        Edit <span class="material-symbols-outlined">edit</span>
                    </button>
                </div>
            </div>
            
    
                <div class="info-profile">
            
                    <div class="form-group-row">
                        <div class="form-group">
                            <label for="Username">Username:</label>
                            <input type="text" value="<%= username %>" readonly>
                        </div>
    
                        <div class="form-group">
                            <label for="Birthdate">Birthdate:</label>
                            <input type="text"  value= "<%= new Date(birthdate).toLocaleDateString("en-US", { month: "2-digit", day: "2-digit", year: "numeric" }) %>" readonly>
                        </div>
    
                        <div class="form-group">
                            <label for="Gender">Gender:</label>
                            <input type="text"  value="<%= gender %>" readonly>
                        </div>
    
                        <div class="form-group">
                            <label for="contact">Contact Number:</label>
                            <input type="text" id="contact" name="contact" value="<%= contactNumber %>" readonly>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="address">Address:</label>
                        <input type="text" id="address" name="address" value=" <%= address %>" readonly>
                    </div>
                    
                </div>
                
    
              
            

          
        </section>


<!-- Edit Modal -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <span class="close-button" id="closeModal">&times;</span>
        <h2>Edit Profile</h2>
        <form id="editForm" action="/patient/edit" method="POST">
            <label for="firstName">First Name:</label>
            <input type="text" id="firstName" name="firstName" value="<%= firstName %>" required>

            <label for="lastName">Last Name:</label>
            <input type="text" id="lastName" name="lastName" value="<%= lastName %>" required>


          

            <label for="ContactNumber">Contact Number:</label>
            <input type="text" 
                   value="<%= contactNumber %>" 
                   id="contactNumber" 
                   name="contactNumber" 
                   pattern="[0-9]{11}" 
                   maxlength="11" 
                   minlength="11" 
                   required 
                   title="Contact number must be exactly 11 digits (e.g., 09123456789)">
    
                   <label for="address">Address:</label>
                   <select id="address" name="address" required>
                       <option value="Purok-1" <%= address === 'Purok-1' ? 'selected' : '' %>>Purok-1</option>
                       <option value="Purok-2" <%= address === 'Purok-2' ? 'selected' : '' %>>Purok-2</option>
                       <option value="Purok-3" <%= address === 'Purok-3' ? 'selected' : '' %>>Purok-3</option>
                       <option value="Purok-4" <%= address === 'Purok-4' ? 'selected' : '' %>>Purok-4</option>
                       <option value="Purok-5" <%= address === 'Purok-5' ? 'selected' : '' %>>Purok-5</option>
                       <option value="Purok-6" <%= address === 'Purok-6' ? 'selected' : '' %>>Purok-6</option>
                       <option value="Purok-7" <%= address === 'Purok-7' ? 'selected' : '' %>>Purok-7</option>
                       <option value="Purok-8" <%= address === 'Purok-8' ? 'selected' : '' %>>Purok-8</option>
                       <option value="Purok-9" <%= address === 'Purok-9' ? 'selected' : '' %>>Purok-9</option>
                       <option value="Purok-10" <%= address === 'Purok-10' ? 'selected' : '' %>>Purok-10</option>
                       <option value="Purok-11" <%= address === 'Purok-11' ? 'selected' : '' %>>Purok-11</option>
                   </select>
                   
            <br>
            
            <button type="submit">Save Changes</button>
        </form>
    </div>
</div>
        
</main>

<!-- Modal Script -->
<script>
    const modal = document.getElementById("editModal");
    const editButton = document.getElementById("editButton");
    const closeModal = document.getElementById("closeModal");

    // Show the modal when "Edit Details" button is clicked
    editButton.addEventListener("click", () => {
        modal.style.display = "flex";
    });

    // Close the modal when the close button is clicked
    closeModal.addEventListener("click", () => {
        modal.style.display = "none";
    });

    // Close the modal when clicking outside of the modal content
    window.addEventListener("click", (event) => {
        if (event.target === modal) {
            modal.style.display = "none";
        }
    });
</script>

    
</body>
</html>
